# 常见问题
## URL编码问题
url采用ASCII码而不是Unicaode，所以url只包含英文字母，数字，某些特殊字符和保留字符。但如果URL中有汉字就必须进行编码处理，但标准的国际组织并没有规定具体的编码方法，而是交给浏览器自己决定。一般的chrome，firefox都是采用百分号编码，又%加上两个16进制的字符组成一个字节，所以一个字节被表现为%xx。一般为了解决这个问题，推荐使用encodeURI()函数进行转码,encodeURIComponent会对"/,:"组成部分编码。"application/x-www-form-urlencoded"数据类型直接就能转化？
## CNAME
cname被称为别名记录，即将该域名映射至别的域名上。一般CNAME用作CDN加速，即使用自己的域名通过CNAME指向CDN提供商提供的域名，当用户访问时本地DNS会使用CNAME指向的域名，而DNS调度系统会智能分析此域名使该域名指向一个离用户地理位置最近(或别的策略)CDN提供商的服务器IP。(linux使用dig指令管理)
## rtmp,httpflv,hls
![协议对比](https://upload-images.jianshu.io/upload_images/238151-6b9f5a7f9b6bd12d.png?imageMogr2/auto-orient/strip|imageView2/2/w/865/format/webp.jpg)
## 端口
1.端口就是个数字，其实就是个逻辑概念并不存在端口阻塞空闲影响带宽之类的情况。2.套接字由协议类型，源ip，目的ip，源端口，目的端口组成，所以监听时是使用的80端口，建立连接后使用的也是80端口。
## [全连接/半连接队列](https://www.cnblogs.com/XDU-Lakers/p/13179845.html)
## [RFC](https://datatracker.ietf.org/doc/search?name=html&rfcs=on&activedrafts=on&olddrafts=on)
## reuseport
## 自适应hash
innodb存储引擎会监控对表上二级索引的查找，如果发现某二级索引被频繁访问（一般三次），便会对该二级索引建立哈希索引提升速度。但可能意义不是很大，一般用仅作等值匹配，占用innodb_buffer_pool空间。
## 建表注意事项
1.热点数据和普通数据分开建表，有助于mysql的bufferpool产生作用（缓冲池就那么大，冷数据和热数据放在一张表，冷数据会占用额外的空间）。2.索引。3.分库分表。
## False Sharing
CPU按照64b块大小来缓存数据的，也就是Cache Line。而如果不同核的多个volatile变量存在同一Cache Line上，由于MESI缓存一致性协议，其中一个核的变量更新了会通知其他核更新数据(cpu内部沟通交换cache，因为都有数据所以不走内存了)，会造成无效的cpu带宽浪费。解决方案可以用数据将cache line对齐，以空间换时间和带宽，java可以使用@Contended注解标识(java使用128bytes，两倍cache line大小以调整相邻扇区预取导致的伪共享，不懂啥意思)，该注解的value可以赋相同的值用来进行分组增加空间利用效率。